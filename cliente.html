

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Programar el lado del cliente &mdash; documentación de Desarrollo de Aplicaciones en Internet - </title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/estilos.css" type="text/css" />
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="4. Problemas" href="problemas.html" />
    <link rel="prev" title="2. Lenguajes de estilo" href="estilo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Desarrollo de Aplicaciones en Internet
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contenidos:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="marcado.html">1. Lenguajes de marcado</a></li>
<li class="toctree-l1"><a class="reference internal" href="estilo.html">2. Lenguajes de estilo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Programar el lado del cliente</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduccion-al-lenguaje-de-programacion-javascript">3.1. Introducción al lenguaje de programación JavaScript</a></li>
<li class="toctree-l2"><a class="reference internal" href="#una-aplicacion-web-sencilla">3.2. Una aplicación web sencilla</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ambitos-y-clausuras">3.2.1. Ámbitos y clausuras</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#las-apis-del-navegador-para-programar-el-lado-del-cliente">3.3. Las APIs del navegador para programar el lado del cliente</a></li>
<li class="toctree-l2"><a class="reference internal" href="#herramientas-para-desarrolladores">3.4. Herramientas para desarrolladores</a></li>
<li class="toctree-l2"><a class="reference internal" href="#profundizar-en-javascript">3.5. Profundizar en JavaScript</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="problemas.html">4. Problemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="practicas.html">5. Enunciados de las prácticas</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Desarrollo de Aplicaciones en Internet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">3. </span>Programar el lado del cliente</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cliente.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="programar-el-lado-del-cliente">
<h1><span class="section-number">3. </span>Programar el lado del cliente<a class="headerlink" href="#programar-el-lado-del-cliente" title="Enlazar permanentemente con este título">¶</a></h1>
<p>JavaScript es un lenguaje orientado a objetos, funcional, dinámico e interpretado, usado principalmente como el lenguaje de programación de las páginas web en el lado del navegador. Actualmente, sin embargo, se usa también en la parte del servidor en entornos como Node.js o MongoDB. El nombre del estándar que regula JavaScript es ECMAScript. Los navegadores recientes entienden las últimas versiones de ECMAScript; cada año se publica una nueva versión (por ejemplo, ECMAScript 2020, también conocido como ES11).</p>
<div class="admonition important">
<p class="admonition-title">Importante</p>
<p>Las habilidades que deberías adquirir con este tema incluyen las siguientes:</p>
<ul class="simple">
<li><p>Comprender los elementos básicos de JavaScript como lenguaje de programación orientado a objetos.</p></li>
<li><p>Saber programar en JavaScript la parte del cliente de una aplicación web usando la API de los navegadores para la gestión del DOM, eventos, estilos, etc.</p></li>
<li><p>Usar las herramientas para desarrolladores integradas en los navegadores, como Chrome DevTools, para depurar un programa escrito en JavaScript.</p></li>
</ul>
</div>
<div class="section" id="introduccion-al-lenguaje-de-programacion-javascript">
<span id="label-intro-js"></span><h2><span class="section-number">3.1. </span>Introducción al lenguaje de programación JavaScript<a class="headerlink" href="#introduccion-al-lenguaje-de-programacion-javascript" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="hazlotu admonition">
<p class="admonition-title">Hazlo tú ahora</p>
<p>Estudia todos los vídeos de la serie «Introducción a JavaScript» en los que se presentan los elementos principales del lenguaje: <a class="reference external" href="https://drive.google.com/file/d/1p3ThE3xA1ubg3jJXFd968ucwckVpayKy/view?usp=sharing">parte 1-1</a>, <a class="reference external" href="https://drive.google.com/file/d/1MgFD19HaWSPo6P_CnPUFF6kmCLJJowEx/view?usp=sharing">parte 1-2</a>, <a class="reference external" href="https://drive.google.com/file/d/1GInxvZFxgt8GcS2cWzbMRWEDpNi0kHmG/view?usp=sharing">parte 1-3</a>, <a class="reference external" href="https://drive.google.com/file/d/1SrmuNde9DeOoOOClZ2WDGbf-aZH4vi33/view?usp=sharing">parte 1-4</a>, <a class="reference external" href="https://drive.google.com/file/d/15Z-leYRlWbMmPWQZczqakCt0q3jMLAcJ/view?usp=sharing">parte 1-5</a> y <a class="reference external" href="https://drive.google.com/file/d/1uP37JivyhSZeEgqwzcD57CznQwzLqS-Z/view?usp=sharing">parte 1-6</a>.</p>
</div>
<p>Elementos más avanzados del lenguaje o las características adicionales a las que un programador puede acceder cuando escribe programas en JavaScript para ser ejecutados por un navegador se estudiarán más adelante. Los conceptos que tienes que comprender del lenguaje se encuentran recogidos en <a class="reference external" href="_static/slides/150-js-slides.html">estas diapositivas</a>, que también contiene información sobre elementos más avanzados que estudiaremos más adelante.</p>
<div class="hazlotu admonition">
<p class="admonition-title">Hazlo tú ahora</p>
<p>Practica con los diferentes conceptos de JavaScript hasta tener claro su uso. Puedes practicar usando la consola de JavaScript de las Chrome Devtools, instalando Node.js, abriendo una <a class="reference external" href="https://jsconsole.com/">consola en línea</a> o creando un proyecto en <a class="reference external" href="https://repl.it/">repl.it</a> de tipo Node.js.</p>
</div>
</div>
<div class="section" id="una-aplicacion-web-sencilla">
<span id="label-app-web-sencilla"></span><h2><span class="section-number">3.2. </span>Una aplicación web sencilla<a class="headerlink" href="#una-aplicacion-web-sencilla" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El código que se incluye más abajo muestra <em>en acción</em>, a modo de introducción, los elementos básicos del lenguaje JavaScript (variables, condicionales, bucles, funciones, etc.), así como la utilización de las APIs del navegador relacionadas con la gestión del DOM, de los eventos o de los estilos, para, con todo ello, presentar una <a class="reference external" href="_static/data/ejemplo-apis-js.html">aplicación web muy sencilla</a> que permite añadir dinámicamente contenido a una página web e interactuar con el contenido añadido.</p>
<div class="hazlotu admonition">
<p class="admonition-title">Hazlo tú ahora</p>
<p>Lee los comentarios para entender el propósito de cada línea, pero ten en cuenta que en actividades posteriores ampliaremos estos elementos. Estudia después todos los vídeos de la serie «Una aplicación web sencilla con JavaScript» en los que se comenta este código con detalle: <a class="reference external" href="https://drive.google.com/file/d/1YUI7AIgzHO9vcGnmxJ9h84YyEZy9MnXi/view?usp=sharing">parte 2-1</a>, <a class="reference external" href="https://drive.google.com/file/d/1g_enM9nz9iVIsGJYmV_HOUORdIs6PUeA/view?usp=sharing">parte 2-2</a>, <a class="reference external" href="https://drive.google.com/file/d/1Iw6z9tf4Jc-XztH7sDa16LANPVF56xDw/view?usp=sharing">parte 2-3</a>, <a class="reference external" href="https://drive.google.com/file/d/1Py4eM_Zu8EHW6hIqw1JXktSVnGuSw47j/view?usp=sharing">parte 2-4</a> y <a class="reference external" href="https://drive.google.com/file/d/16ZE7bQHXPTcRO7xCbqml_9m-nsenmgBB/view?usp=sharing">parte 2-5</a>. Repasa después, otra vez, el código y asegúrate de que ahora comprendes mejor cada una de sus instrucciones.</p>
</div>
<div class="highlight-html notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="c">&lt;!-- Ejemplos de uso de la API DOM y de la API de eventos del navegador --&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Ejemplos de uso de la API DOM y de la API de eventos del navegador<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

    <span class="c">&lt;!-- Es recomendable que tanto estilos como scripts vayan en ficheros aparte, pero</span>
<span class="c">    en este caso los dejamos aquí por ser una prueba de concepto --&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
      <span class="p">@</span><span class="k">import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;https://fonts.googleapis.com/css?family=Lato&amp;display=swap&#39;</span><span class="o">)</span><span class="p">;</span>
      <span class="o">*</span> <span class="p">{</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">body</span> <span class="p">{</span>
        <span class="k">font-size</span><span class="p">:</span> <span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">font-family</span><span class="p">:</span> <span class="s1">&#39;Lato&#39;</span><span class="p">,</span> <span class="kc">sans-serif</span><span class="p">;</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">h3</span><span class="p">.</span><span class="nc">destacado</span> <span class="p">{</span>
        <span class="k">color</span><span class="p">:</span> <span class="kc">lightseagreen</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">h3</span> <span class="p">{</span>
        <span class="k">color</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
        <span class="k">font-size</span><span class="p">:</span> <span class="mf">1.3</span><span class="kt">em</span><span class="p">;</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="p">;</span>
        <span class="k">margin-right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">form</span> <span class="p">{</span>
        <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">section</span> <span class="p">{</span>
        <span class="k">border-top</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="kc">lightgray</span><span class="p">;</span>
	      <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">padding-top</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>

    <span class="c">&lt;!-- Formularios: --&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;f1&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Crea sección con título:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span> 
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;título&quot;</span><span class="p">&gt;</span> 
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Crea sección<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;f2&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Destaca secciones cuya primera palabra sea:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span> 
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;palabra&quot;</span><span class="p">&gt;</span> 
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Marca sección<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;f3&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Desmarca todas las secciones<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

    <span class="c">&lt;!-- El elemento main está vacío inicialmente, pero irá conteniendo las secciones que </span>
<span class="c">      se crearán dinámicamente. --&gt;</span>
    <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
      <span class="c1">// Manejador del evento de marcar/desmarcar de una sección individual:</span>
      <span class="kd">function</span> <span class="nx">marcaDesmarcaUnaSección</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// event.currentTarget es el elemento al que se asoció este manejador;</span>
        <span class="c1">// event.target es el elemento sobre el que se produjo la acción;</span>
        <span class="c1">// parentNode devuelve el nodo padre de un elemento dado;</span>
        <span class="c1">// toggle añade el valor &#39;destacado&#39; a class si el elemento no lo tiene y lo</span>
        <span class="c1">// borra si lo tiene:</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span><span class="p">(</span><span class="s1">&#39;destacado&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Manejador del evento de creación de una nueva sección a partir del título</span>
      <span class="c1">// indicado en el formulario; no se declara el parámetro del evento porque </span>
      <span class="c1">// no se va a usar, pero creaSección se invocará por el navegador con el</span>
      <span class="c1">// argumento del evento igualmente:</span>
      <span class="kd">function</span> <span class="nx">creaSección</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Obtiene el título del formulario; querySelector devuelve el primer nodo</span>
        <span class="c1">// que cumple con el criterio del selector desde el objeto desde el que </span>
        <span class="c1">// se invoca la función (en este caso, el elemento raíz, document):</span>
        <span class="kd">let</span> <span class="nx">título</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#título&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
        <span class="c1">// Borra el campo del formulario:</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#título&#39;</span><span class="p">).</span><span class="nx">value</span><span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="c1">// Crea el elemento padre para la nueva sección:</span>
        <span class="kd">let</span> <span class="nx">sección</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;section&#39;</span><span class="p">);</span>
        <span class="c1">// Una forma de añadir HTML dinámicamente es mediante el atributo innerHTML;</span>
        <span class="c1">// es más cómoda, pero es más fácil cometer errores en el HTML.</span>
        <span class="c1">// Además, innerHTML debe ser usado con prudencia y nunca con cadenas no</span>
        <span class="c1">// generadas por nuestra aplicación; la siguiente instrucción desobedece</span>
        <span class="c1">// esta regla y hace que la aplicación pueda recibir potencialmente</span>
        <span class="c1">// un ataque tipo XSS (por *cross-site scripting*); para comprobarlo, prueba</span>
        <span class="c1">// a introducir como título: &lt;img src=&quot;x&quot; onerror=&quot;alert(&#39;¡Ataque XSS!&#39;)&quot;&gt;</span>
        <span class="c1">// Para evitar estos ataques, se recomienda usar textContent cuando </span>
        <span class="c1">// hay contenido no propio o sustituir ciertos caracteres en las cadenas</span>
        <span class="c1">// antes de usar innerHTML:</span>
        <span class="nx">sección</span><span class="p">.</span><span class="nx">innerHTML</span><span class="o">=</span> <span class="s1">&#39;&lt;h3&gt;&#39;</span><span class="o">+</span><span class="nx">título</span><span class="o">+</span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">;</span>
        <span class="c1">// Otra forma de añadir HTML dinámicamente es mediante la APIS de creación</span>
        <span class="c1">// e inserción de nodos:</span>
        <span class="kd">let</span> <span class="nx">botón</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">);</span>
        <span class="nx">botón</span><span class="p">.</span><span class="nx">textContent</span><span class="o">=</span> <span class="s1">&#39;Marca/desmarca&#39;</span><span class="p">;</span>
        <span class="nx">sección</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">botón</span><span class="p">);</span>
        <span class="c1">// Todos los botones individuales creados para cada sección tienen el</span>
        <span class="c1">// mismo manejador de eveneto; el parámetro del manejador nos permitirá</span>
        <span class="c1">// determinar sobre qué botón concreto se ha hecho clic:</span>
        <span class="nx">botón</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">marcaDesmarcaUnaSección</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
        <span class="c1">// Insertamos la sección dentro de &lt;main&gt;:</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">sección</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// Itera sobre todos los elementos h3 (por eso usamos querySelectorAll y no </span>
      <span class="c1">// querySelector)</span>
      <span class="kd">function</span> <span class="nx">destacaSecciónSegúnPalabra</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">secciones</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">);</span>
        <span class="c1">// Obtiene la palabra a buscar del formulario:</span>
        <span class="kd">let</span> <span class="nx">palabra</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#palabra&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
        <span class="c1">// Borra el campo del formulario:</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#palabra&#39;</span><span class="p">).</span><span class="nx">value</span><span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="c1">// Itera sobre todos los elementos h3:</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">secciones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Primera palabra del texto contenido en el h3:</span>
          <span class="kd">let</span> <span class="nx">primera</span><span class="o">=</span> <span class="nx">secciones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">textContent</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
          <span class="c1">// En JavaScript, el operador == puede realizar conversiones de tipo antes</span>
          <span class="c1">// de la comparación; con el operador === no hay conversiones implícitas:</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">primera</span><span class="o">===</span><span class="nx">palabra</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Añade &#39;destacado&#39; como class si la palabra coincide:</span>
            <span class="nx">secciones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;destacado&#39;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">// Desmarca todos los h3 del documento quitando la clase &#39;destacado&#39;</span>
      <span class="c1">// de sus encabezados:</span>
      <span class="kd">function</span> <span class="nx">desmarcaTodasSecciones</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">secciones</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">secciones</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">secciones</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;destacado&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="c1">// Función de inicialización:</span>
      <span class="kd">function</span> <span class="nx">init</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Asignación de manejadores de eventos; el segundo parámetro es el nombre de </span>
        <span class="c1">// una función, pero no se llama (aún) a dicha función; el tercer parámetro se</span>
        <span class="c1">// estudiará más adelante:</span>
        <span class="kd">let</span> <span class="nx">e</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#f1 button&#39;</span><span class="p">);</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">creaSección</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">e</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#f2 button&#39;</span><span class="p">);</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">destacaSecciónSegúnPalabra</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">e</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#f3 button&#39;</span><span class="p">);</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="nx">desmarcaTodasSecciones</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
        <span class="c1">// Se evita para todos los formularios que al aceptar su contenido (pulsando el</span>
        <span class="c1">// botón o enter) se envíe una petición al servidor y se recargue la página:</span>
        <span class="kd">let</span> <span class="nx">fs</span><span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">fs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">fs</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">addEventListener</span><span class="p">(</span>
            <span class="s1">&#39;submit&#39;</span><span class="p">,</span>
            <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="p">},</span> 
            <span class="kc">false</span>
          <span class="p">);</span>
        <span class="p">}</span>
  
        <span class="c1">// Usando construcciones recientes del lenguaje para iterar sobre un array </span>
        <span class="c1">// de elementos y para indicar mediante funciones flecha (o lambda) la función</span>
        <span class="c1">// a ejecutar sobre cada elemento, el código anterior sería: </span>
        <span class="c1">//</span>
        <span class="c1">// Array.from(document.querySelectorAll(&#39;form&#39;)).forEach(</span>
        <span class="c1">//  (formulario) =&gt; {</span>
        <span class="c1">//    formulario.addEventListener(</span>
        <span class="c1">//      &#39;submit&#39;,</span>
        <span class="c1">//      (event) =&gt; {event.preventDefault();}, </span>
        <span class="c1">//      false</span>
        <span class="c1">//    )</span>
        <span class="c1">//  }</span>
        <span class="c1">// );</span>

      <span class="p">}</span>

      <span class="c1">// Define init como la función que será invocada cuando se dispare el</span>
      <span class="c1">// evento DOMContentLoaded, que señala que el árbol DOM ya está construido</span>
      <span class="c1">// (y sus nodos disponibles en memoria), aunque quizás aún no se hayan</span>
      <span class="c1">// descargado todas las imágenes, aplicados todos los estilos, etc.;</span>
      <span class="c1">// si en lugar de init pusiéramos init() el efecto sería diferente (y</span>
      <span class="c1">// probablemente no deseado):</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="nx">init</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="ambitos-y-clausuras">
<h3><span class="section-number">3.2.1. </span>Ámbitos y clausuras<a class="headerlink" href="#ambitos-y-clausuras" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las clausuras y su relación con las variables declaradas con <code class="docutils literal notranslate"><span class="pre">var</span></code> o <code class="docutils literal notranslate"><span class="pre">let</span></code> es uno de los aspectos que más cuesta entender a los programadores que acaban de empezar con JavaScript. Existen cuatro tipos de ámbitos para las variables en JavaScript:</p>
<ul class="simple">
<li><p>ámbito de función: corresponde a las variables locales declaradas con <code class="docutils literal notranslate"><span class="pre">var</span></code>; estas variables se almacenan en la pila y pueden usarse incluso antes de haber sido definidas; esto es así por un mecanismo conocido como <em>izado</em> (<em>hoisting</em>) que aupa las declaraciones de variables locales (pero no sus inicializaciones) al comienzo de la función; declarar dos o más veces una variable con <code class="docutils literal notranslate"><span class="pre">var</span></code> dentro de la misma función equivale a declararla una sola vez al comienzo de esta; si intentamos leer el valor de una variable antes de su declaración en el código y antes de haberle asignado ningún valor obtenemos el valor <em>undefined</em>;</p></li>
<li><p>ámbito de bloque: corresponde a las variables locales declaradas con <code class="docutils literal notranslate"><span class="pre">let</span></code>; estas variables se almacenan en la pila también, pero no hay ningún proceso de izado y la variable se circunscribe al ámbito en el que ha sido declarada; dos variables declaradas en ámbitos diferentes de una misma función tienen espacios separados en la pila; no se pueden declarar dos variables de este tipo con el mismo nombre dentro del mismo contexto; si se declara una variable con <code class="docutils literal notranslate"><span class="pre">let</span></code> dentro de un bucle, se reserva sitio en la pila para una variable distinta en cada iteración;  el uso de <code class="docutils literal notranslate"><span class="pre">let</span></code> está permitido en el lenguaje desde la versión 6 de ECMAScript, publicada en 2015, por lo que es normal que encuentres muchos ejemplos de código que no lo usan;</p></li>
<li><p>ámbito global: corresponde a las variables globales declaradas fuera de cualquier función; estas variables se almacenan en el <em>heap</em> y sus declaraciones también son <em>izadas</em> al principio del ámbito global;</p></li>
<li><p>ámbito léxico: corresponde al hecho de que una función definida dentro de otra función puede acceder a las variables locales de esta última; si una función interna <em>sobrevive</em> a la función contenedora, las variables referenciadas no se borran de la memoria (a la asociación entre la función y las variables externas se le conoce como <em>clausura</em>);</p></li>
</ul>
<p>Las declaraciones de funciones locales y globales también sufren el mecanismo de izado en sus ámbitos respectivos.</p>
<p>Estudia el siguiente código y ejécutalo después de dedicar un rato a pensar qué valores imprime por la consola.</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">x</span><span class="p">.</span><span class="nx">f1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">x</span><span class="p">.</span><span class="nx">f2</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">f</span><span class="p">();</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">f1</span><span class="p">();</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">f2</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<p>La variable <code class="docutils literal notranslate"><span class="pre">i</span></code> se declara con <code class="docutils literal notranslate"><span class="pre">var</span></code> y, por tanto, su ámbito es el de la función <code class="docutils literal notranslate"><span class="pre">f</span></code>. No importa que usemos <code class="docutils literal notranslate"><span class="pre">var</span></code> varias veces a continuación dentro de la función, incluso aunque estas declaraciones adicionales estén dentro de un nuevo ámbito. En la pila de ejecución solo se reserva sitio para una variable cuando se ejecuta la función y esta única posición es la que no se destruye al salir de la función debido a las clausuras que se crean por las dos funciones anónimas asignadas a <code class="docutils literal notranslate"><span class="pre">x.f1</span></code> y <code class="docutils literal notranslate"><span class="pre">x.f2</span></code>. La variable <code class="docutils literal notranslate"><span class="pre">i</span></code> vale 2 al salir de la función y este valor es el que se usa al llamar a las dos funciones.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Observa de paso que para introducir nuevos ámbitos no es necesario usar una instrucción condicional o un bucle, sino que en JavaScript, como en la mayoría de lenguajes, basta con encerrar un bloque de código entre llaves para conseguirlo.</p>
</div>
<p>Sin embargo, si usamos <code class="docutils literal notranslate"><span class="pre">let</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">var</span></code> en las declaraciones de <code class="docutils literal notranslate"><span class="pre">i</span></code>, el ámbito de cada variable será el del bloque y tendremos tres variables distintas en la pila de ejecución justo antes de salir de la función. La primera de ellas será destruida en ese momento, pero las otras dos se <em>salvarán</em> de dicha destrucción para mantener las clausuras:</p>
<div class="highlight-javascript notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">f</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">x</span><span class="o">=</span> <span class="p">{};</span>
  <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="nx">x</span><span class="p">.</span><span class="nx">f1</span><span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="nx">x</span><span class="p">.</span><span class="nx">f2</span><span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);};</span>
  <span class="p">}</span>
  <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">x</span><span class="o">=</span> <span class="nx">f</span><span class="p">();</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">f1</span><span class="p">();</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">f2</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="las-apis-del-navegador-para-programar-el-lado-del-cliente">
<h2><span class="section-number">3.3. </span>Las APIs del navegador para programar el lado del cliente<a class="headerlink" href="#las-apis-del-navegador-para-programar-el-lado-del-cliente" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los navegadores incluyen una serie de librerías estandarizadas para programar la parte de la aplicación web que se ejecuta en el navegador (lo que se conoce como el <em>front-end</em> de la aplicación, en oposición al <em>back-end</em>, que denotaría la parte del servidor). En esta actividad profundizaremos en las APIs para el manejo del árbol DOM, la gestión de eventos y el control de estilos. Otras APIs, como la que permite realizar peticiones asíncronas desde el cliente a un servidor, se explorarán más adelante.</p>
<p>Los conceptos que tienes que estudiar de estas APIs se encuentran recogidos en <a class="reference external" href="_static/slides/150-apidom-slides.html">estas otras diapositivas</a>.</p>
<div class="hazlotu admonition">
<p class="admonition-title">Hazlo tú ahora</p>
<p>Lee el <a class="reference external" href="https://info340.github.io/dom.html">capítulo sobre el Document Object Model</a> del libro «Client-Side Web Development», donde se explican las principales funciones de las APIs ya mencionadas. Puedes practicar con la consola de JavaScript de las Chrome Devtools o con entornos como <a class="reference external" href="https://jsfiddle.net/">JSFiddle</a>.</p>
</div>
</div>
<div class="section" id="herramientas-para-desarrolladores">
<h2><span class="section-number">3.4. </span>Herramientas para desarrolladores<a class="headerlink" href="#herramientas-para-desarrolladores" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las herramientas para desarrolladores que incorporan los navegadores permiten depurar el código en JavaScript de la parte del cliente de una aplicación web.</p>
<div class="hazlotu admonition">
<p class="admonition-title">Hazlo tú ahora</p>
<p>Familiarízate con las opciones de depuración de JavaScript de las pestañas <span class="guilabel">Console</span> y <span class="guilabel">Sources</span> del entorno de las Chrome DevTools siguiendo estas páginas de su documentación: <a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/console">Console Overview</a> , <a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/javascript">Get Started</a>, <a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints">Pause your Code with Breakpoints</a> y <a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/javascript/reference">JS Debugging Reference</a>. Practica las distintas posibilidades en DevTools con una aplicación web como la de la primera actividad de este tema.</p>
</div>
</div>
<div class="section" id="profundizar-en-javascript">
<h2><span class="section-number">3.5. </span>Profundizar en JavaScript<a class="headerlink" href="#profundizar-en-javascript" title="Enlazar permanentemente con este título">¶</a></h2>
<p>JavaScript tiene obviamente muchos más elementos que los que hemos explorado en este tema. Si quieres ampliar por tu cuenta tu conocimiento del lenguaje, puedes seguir con referencias como <a class="reference external" href="https://javascript.info/">The Modern JavaScript Tutorial</a> o <a class="reference external" href="https://eloquentjavascript.net/">Eloquent JavaScript</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="problemas.html" class="btn btn-neutral float-right" title="4. Problemas" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="estilo.html" class="btn btn-neutral float-left" title="2. Lenguajes de estilo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Juan Antonio Pérez

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>